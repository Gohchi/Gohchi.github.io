<!doctype html>
<html lang="en">
	<head>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" name="viewport">

		<title>Yu-Gi-Oh! Collection</title>
		<link rel="stylesheet" href="styles.css">
		<link rel="shortcut icon" type="image/png" href="favicon.png"/>
    <script type="importmap">
      {
        "imports": {
          "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.prod.js"
        }
      }
    </script>
    <script type="module">
      import { createApp, onMounted, ref } from 'vue';
      import { getAPI } from '/modules/Tools.js';
      
      createApp({
        components: {
        },
        methods: {
          check() {
            console.log(this);
          }
        },
        setup() {
          return {
            cardRef: ref([])
          };
        },
        mounted() {
          /* Options API */
          // console.log(this.$el);
          getAPI(
            //'http://ip-api.com/json'
            'yugiohprices.com/api/get_card_prices/Raigeki',
            //'yugiohprices.com/api/price_for_print_tag/PSV-000',
          )
          .then( ({ data }) => {
            console.log(data);
            this._.setupState.cardRef.value = data;
          } );
        },
        data() {
          return {
            bgSvgMode: false,
            showBook: window.innerWidth > 1200,
            cards: [
              { name: 'Raigeki' },
            ]
          }
        }
      }).mount('#app');
    </script>
	</head>
	<body id="app">
    <div class="app-wrapper" :class="{ svg: bgSvgMode }">
      <ul>
        <li 
          v-for="card in cards"
          :key="card.name"
        >{{ card.name }}</li>
      </ul>
      <table v-if="cardRef && cardRef.value">
        <thead>
          <tr>
            <th>Pack</th>
            <th>Tag</th>
            <th>Rarity</th>
          </tr>
        </thead>
        <tbody>
          <tr 
            v-for="cardData in cardRef.value"
            :key="cardData.name"
          >
            <td>{{ cardData.name }}</td>
            <td>{{ cardData.print_tag }}</td>
            <td>{{ cardData.rarity }}</td>
          </tr>
        </tbody>
      </table>
      <!-- <button
        @click="check()"
      >check</button> -->
    </div>
	</body>
</html>
